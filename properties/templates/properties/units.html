{% extends 'home/base.html' %}
{% load widget_tweaks %}

{% block header %}
<div class="btn-group-sm">

    <a href="{% url 'properties:unit_add' %}" class="btn btn-info">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-plus" fill="currentColor"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
                d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H4z" />
            <path fill-rule="evenodd"
                d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z" />
        </svg>
        Add Unit
    </a>
    <a href="{% url 'properties:add' %}" class="btn btn-info">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-plus" fill="currentColor"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
                d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H4z" />
            <path fill-rule="evenodd"
                d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z" />
        </svg>
        Add Property
    </a>
</div>

{% endblock header %}

{% block body %}
<hr class="mt-n3 mb-3">

<h5>
    Filter Results
    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-filter" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
    </svg>
</h5>

<form class="from" method='get' action="">

    <div class="d-flex flex-wrap justify-content-start mx-n3 mb-3">


        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0 ">
            <small>{{unitFilter.form.property.label}}</small>
            {% render_field unitFilter.form.property class="form-control form-control-sm shadow-sm" %}
        </div>
        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0 ">
            <small>{{unitFilter.form.num.label}}</small>
            {% render_field unitFilter.form.num class="form-control form-control-sm shadow-sm" %}
        </div>
        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0 ">
            <small>{{unitFilter.form.deposit.label}}</small>
            {% render_field unitFilter.form.deposit class="form-control form-control-sm shadow-sm" %}
        </div>
        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0 ">
            <small>{{unitFilter.form.beds.label}}</small>
            {% render_field unitFilter.form.beds class="form-control form-control-sm shadow-sm" %}
        </div>
        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0 ">
            <small>{{unitFilter.form.baths.label}}</small>
            {% render_field unitFilter.form.baths class="form-control form-control-sm shadow-sm" %}
        </div>


    </div>
    <hr class=" mb-2">

    <div class="d-flex flex-wrap justify-content-start mx-n3 mb-3">

        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0 ">
            {% if message %}
            <small class="bg-danger">{{message}}</small>
            {% endif %}
            <small>{{unitFilter.form.vacant_in.label}}</small>
            {% render_field unitFilter.form.vacant_in class="form-control form-control-sm shadow-sm" %}
        </div>



        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0">
            <small>{{unitFilter.form.market_rent.label}}</small>
            {% render_field unitFilter.form.market_rent class="form-control form-control-sm shadow-sm" %}
        </div>

        <div class="form-group col-xl-2 col-lg-3 col-sm-4 col-4 my-0">
            <small>{{unitFilter.form.size.label}}</small>
            {% render_field unitFilter.form.size class="form-control form-control-sm shadow-sm" %}
        </div>

    </div>
    <button class="btn btn-info form-control" type="submit">
        Filter
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-filter" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
        </svg>
    </button>

</form>

<div class="table-responsive">
    <table class="table table-hover table-striped mt-2 shadow-sm">

        <thead class="bg-3">
            <tr>
                <th scope="col">Property</th>
                <th scope="col">Unit#</th>
                <th scope="col">Market Rent</th>
                <th scope="col">Beds</th>
                <th scope="col">Baths</th>
                <th scope="col">Size</th>
                <th scope="col">Deposit</th>
            </tr>
        </thead>

        <tbody>
            {% for unit in qs %}
            <tr>
                <th scope="row">
                    <a href="{% url 'properties:property' unit.property.id %}">
                        {{unit.property}}
                    </a>
                </th>

                <td>
                    <a href="{% url 'properties:unit' unit.id %}">
                        {{unit.num}}
                    </a>
                </td>
                
                <td>{{unit.market_rent}}$</td>
                <td>{{unit.beds}}</td>
                <td>{{unit.baths}}</td>
                <td>{{unit.size}} <small>sq.m.</small></td>
                <td>{{unit.deposit}}$</td>
            </tr>
            {% empty %}
            <tr>
                <td class="text-center" colspan="100">No Units Available for This Property</td>
            </tr>

            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock body %}